# NAČRTOVANJE OHIŠJA ZA ELEKTRONSKO VEZJE

To poglavje je namenjeno praktičnemu vodenju skozi celoten postopek načrtovanja elektronskega vezja in pripadajočega ohišja. Bralca vodi od začetnega načrtovanja v programu KiCAD, kjer že v fazi električne sheme in postavitve tiskanega vezja upoštevamo mehanske zahteve, do prenosa podatkov v FreeCAD in načrtovanja ohišja, primernega za izdelavo. Poglavje je zasnovano kot priročnik: poudarek je na zaporedju korakov, praktičnih odločitvah in tipičnih pasteh, s katerimi se srečamo pri realnih projektih iz elektronike.

## Načrtovanje vezja v programu KiCAD

Načrtovanje ohišja se v praksi ne začne v mehanskem CAD-orodju, temveč že pri načrtovanju elektronskega vezja. Zato je smiselno, da že v programu KiCAD postavimo osnovne smernice, ki bodo kasneje omogočile enostavno in smiselno izdelavo ohišja.

Postopek se začne z izdelavo električne sheme. Pri tem je priporočljivo uporabljati realne gradnike, ki imajo definirana ustrezna podnožja (angl. footprint) in, kadar je mogoče, tudi pripadajoče 3D modele. Vgrajena knjižnica KiCAD ponuja osnovni nabor elementov, za zahtevnejše projekte pa pogosto posežemo po zunanjih virih. Zelo razširjeni so odprtokodni repozitoriji (npr. SnapEDA, Ultra Librarian, GrabCAD), kjer lahko najdemo tako podnožje-e kot 3D modele (STEP ali VRML) za številne komercialne komponente. Pri uporabi zunanjih gradnikov je nujno preveriti skladnost dimenzij z dejanskimi komponentami.

> **Praktična opomba:**\
> podnožje, ki je električno pravilen, je lahko mehansko popolnoma neustrezen. Preden element uporabimo v projektu, je priporočljivo preveriti mehanske mere v podatkovnem listu proizvajalca.

> **Slika:** Primer izbire elektronskega gradnika z ustreznim podnožje-om in 3D modelom v KiCAD-u.

Posebno pozornost je treba nameniti komponentam, ki bodo v neposrednem stiku z ohišjem: konektorjem, gumbom, stikalom, LED diodam in prikazovalnikom. Njihov položaj v shemi sicer ni kritičen, je pa odločilen pri kasnejši postavitvi na tiskanem vezju.

> **Praktična opomba:**\
> Konektor, ki je v shemi postavljen pravilno, je lahko na PCB-ju neuporaben, če ni poravnan z robom vezja ali če njegova višina presega razpoložljiv prostor v ohišju.

Ko je shema zaključena, sledi prehod na načrtovanje PCB-ja. V tej fazi že zavestno razmišljamo o pritrditvi vezja v ohišje. Na tiskanem vezju je treba predvideti montažne luknje, ki omogočajo mehansko pritrditev PCB-ja na distančnike ali nosilce v ohišju. Montažne luknje običajno niso električno povezane z vezjem, vendar morajo biti pravilno dimenzionirane glede na izbrane vijake in toleranco izdelave. Položaj teh lukenj določa osnovne referenčne točke za kasnejše mehansko načrtovanje.

> **Praktična opomba:**\
> Če montažnih lukenj ne predvidimo že v KiCAD-u, jih kasneje v mehanskem modelu ne moremo natančno referencirati, kar pogosto vodi v slabo prileganje PCB-ja v ohišje.

> **Slika:** PCB vezje z označenimi montažnimi luknjami in robom vezja (Edge.Cuts).

Obliko tiskanega vezja definiramo s plastjo Edge.Cuts. Pri tem ni nujno, da je vezje pravokotne oblike; pogosto se prilagodi razpoložljivemu prostoru v ohišju ali ergonomskim zahtevam. V tej fazi je priporočljivo razmišljati tudi o višini komponent, saj bodo te kasneje vplivale na višino ohišja in notranji razpored.

> **Tipična napaka:**\
> Načrtovalec upošteva tloris PCB-ja, zanemari pa višino najvišje komponente, kar vodi v ohišje, ki ga po izdelavi ni mogoče zapreti.

### 3D podpora v KiCAD-u in izgradnja PCB-ja

Ko je postavitev komponent zaključena, lahko uporabimo 3D-pogled v KiCAD-u za osnovno prostorsko preverjanje. 3D-pogled omogoča hiter vizualni pregled razporeditve komponent, njihovo višino in medsebojne razdalje. Če so k podnožje-om pravilno povezani 3D modeli, lahko že na tej stopnji zaznamo morebitne težave, kot so previsoki elementi ali neustrezno orientirani konektorji.

> **Slika:** 3D-pogled tiskanega vezja v KiCAD-u z vsemi nameščenimi komponentami.

V primeru, da izbrani podnožje nima pripadajočega 3D modela, ga lahko dodamo ročno. KiCAD omogoča povezavo podnožje-a z zunanjim 3D modelom v formatu STEP ali VRML. S tem zagotovimo, da bo tudi končni 3D-model PCB-ja čim bolj skladen z realnim stanjem. 3D-model elementa lahko načrtujemo sami v programu, kot je FreeCAD, pogosteje pa ga poiščemo na spletnih portalih, kot je [SnapEDA](https://www.snapeda.com/home/).

> **Praktična opomba:**\
> Manjkajoč ali napačen 3D model ne vpliva na delovanje vezja, lahko pa povzroči resne težave pri načrtovanju ohišja.

Ko smo zadovoljni z zasnovo PCB-ja, lahko celotno tiskanino izvozimo v STEP format. Izvoz STEP datoteke predstavlja ključno vez med elektronskim in mehanskim delom projekta. V STEP datoteki so zajeti oblika tiskanega vezja in vsi 3D modeli komponent, kar omogoča natančen uvoz v mehanski CAD-program.

> **Slika:** Izvoz PCB vezja v STEP format iz programa KiCAD.

## Načrtovanje ohišja v programu FreeCAD

Izvoženo STEP datoteko tiskanega vezja uvozimo v program FreeCAD. Uvoženi model obravnavamo kot referenčno geometrijo, ki določa zunanje meje in ključne položaje komponent. Priporočljivo je, da referenčni model zaklenemo ali jasno ločimo od lastnih konstrukcijskih elementov, da se izognemo nenamernim spremembam.

> **Slika:** Uvoz STEP modela PCB-ja v delovni prostor FreeCAD-a.

Načrtovanje ohišja se začne z osnovno prostorsko razporeditvijo. Najprej določimo minimalne notranje dimenzije ohišja, ki morajo omogočati nemoteno namestitev PCB-ja, komponent in pritrdilnih elementov. Nato postopoma dodajamo konstrukcijske elemente, kot so nosilci za montažne luknje, stene ohišja in odprtine za konektorje, gumbe ali prikazovalnike.

> **Praktična opomba:**\
> Pri načrtovanju nosilcev za montažne luknje je smiselno uporabiti iste referenčne točke kot v KiCAD-u, saj to omogoča natančno poravnavo PCB-ja v ohišju.

FreeCAD omogoča parametrično modeliranje, kar je posebej uporabno pri projektih, kjer se lahko PCB še spreminja. Dimenzije ohišja, položaji odprtin in višine nosilcev lahko povežemo z osnovnimi parametri, kar omogoča hitro prilagoditev ohišja ob spremembi vezja.

> **Tipična napaka:**\
> Ohišje je modelirano brez parametrov, zato že manjša sprememba PCB-ja zahteva popolno preoblikovanje mehanskega modela.

Zaključen mehanski model ohišja skupaj z uvoženim PCB-jem omogoča celovit pregled sistema. Na tej stopnji lahko preverimo prileganje, dostopnost komponent in splošno funkcionalnost zasnove, še preden se lotimo fizične izdelave.

